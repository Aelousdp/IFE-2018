!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(w[e]&&b[e]){for(var n in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n]);0==--m&&0===y&&_()}}(e,n),t&&t(e,n)};var n,r=!0,o="e8f624f12ad5a4865892",i=1e4,a={},s=[],c=[];function u(e){var t=S[e];if(!t)return j;var r=function(r){return t.hot.active?(S[r]?-1===S[r].parents.indexOf(e)&&S[r].parents.push(e):(s=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),j(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return j[e]},set:function(t){j[e]=t}}};for(var i in j)Object.prototype.hasOwnProperty.call(j,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(e){return"ready"===d&&f("prepare"),y++,j.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===d&&(g[e]||O(e),0===y&&0===m&&_())}},r.t=function(e,t){return 1&t&&(e=r(e)),j.t(e,-2&t)},r}var l=[],d="idle";function f(e){d=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}var p,h,v,m=0,y=0,g={},b={},w={};function k(e){return+e+""===e?+e:e}function T(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return r=e,f("check"),function(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=j.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=e,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void n(e)}t(e)}}})}(i).then(function(e){if(!e)return f("idle"),null;b={},g={},w=e.c,v=e.h,f("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return h={},O(0),"prepare"===d&&0===y&&0===m&&_(),t})}function O(e){w[e]?(b[e]=!0,m++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=j.p+""+e+"."+o+".hot-update.js",t.appendChild(n)}(e)):g[e]=!0}function _(){f("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return x(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&t.push(k(n));e.resolve(t)}}function x(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var n,r,i,c,u;function l(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((c=S[i])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(c.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var s=0;s<c.parents.length;s++){var u=c.parents[s],l=S[u];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(l.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),p(n[u],[i])):(delete n[u],t.push(u),r.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var m={},y=[],g={},b=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var T in h)if(Object.prototype.hasOwnProperty.call(h,T)){var O;u=k(T);var _=!1,x=!1,L=!1,P="";switch((O=h[T]?l(u):{type:"disposed",moduleId:T}).chain&&(P="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(_=new Error("Aborted because of self decline: "+O.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(_=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(_=new Error("Aborted because "+u+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(O),x=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),L=!0;break;default:throw new Error("Unexception type "+O.type)}if(_)return f("abort"),Promise.reject(_);if(x)for(u in g[u]=h[u],p(y,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,u)&&(m[u]||(m[u]=[]),p(m[u],O.outdatedDependencies[u]));L&&(p(y,[O.moduleId]),g[u]=b)}var E,I=[];for(r=0;r<y.length;r++)u=y[r],S[u]&&S[u].hot._selfAccepted&&I.push({module:u,errorHandler:S[u].hot._selfAccepted});f("dispose"),Object.keys(w).forEach(function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)});for(var M,D,H=y.slice();H.length>0;)if(u=H.pop(),c=S[u]){var q={},C=c.hot._disposeHandlers;for(i=0;i<C.length;i++)(n=C[i])(q);for(a[u]=q,c.hot.active=!1,delete S[u],delete m[u],i=0;i<c.children.length;i++){var A=S[c.children[i]];A&&(E=A.parents.indexOf(u))>=0&&A.parents.splice(E,1)}}for(u in m)if(Object.prototype.hasOwnProperty.call(m,u)&&(c=S[u]))for(D=m[u],i=0;i<D.length;i++)M=D[i],(E=c.children.indexOf(M))>=0&&c.children.splice(E,1);for(u in f("apply"),o=v,g)Object.prototype.hasOwnProperty.call(g,u)&&(e[u]=g[u]);var N=null;for(u in m)if(Object.prototype.hasOwnProperty.call(m,u)&&(c=S[u])){D=m[u];var W=[];for(r=0;r<D.length;r++)if(M=D[r],n=c.hot._acceptedDependencies[M]){if(-1!==W.indexOf(n))continue;W.push(n)}for(r=0;r<W.length;r++){n=W[r];try{n(D)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:e}),t.ignoreErrored||N||(N=e)}}}for(r=0;r<I.length;r++){var U=I[r];u=U.module,s=[u];try{j(u)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||N||(N=n),N||(N=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||N||(N=e)}}return N?(f("fail"),Promise.reject(N)):(f("idle"),new Promise(function(e){e(y)}))}var S={};function j(t){if(S[t])return S[t].exports;var r=S[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:T,apply:x,status:function(e){if(!e)return d;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);t>=0&&l.splice(t,1)},data:a[e]};return n=void 0,t}(t),parents:(c=s,s=[],c),children:[]};return e[t].call(r.exports,r,r.exports,u(t)),r.l=!0,r.exports}j.m=e,j.c=S,j.d=function(e,t,n){j.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},j.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},j.t=function(e,t){if(1&t&&(e=j(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(j.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)j.d(n,r,function(t){return e[t]}.bind(null,r));return n},j.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return j.d(t,"a",t),t},j.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},j.p="",j.h=function(){return o},u(6)(j.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t){a(this,e),this.cash=t.cash||0,this.seats=t.seats||0,this.staffList=t.staffList||[],this.worldTime=1e3}return r(e,[{key:"hire",value:function(e){-1===this.staffList.indexOf(e)?(this.staffList.push(e),console.log("hire "+e.name)):console.log("hire error"+e.name+", because he is your staff.")}},{key:"fire",value:function(e){var t=this;-1!==this.staffList.indexOf(e)?this.staffList.map(function(n,r){n.id===e.id&&(t.staffList.splice(r,1),console.log("fire "+e.name))}):console.log("fire error"+e.name+", he is not your staff.")}},{key:"getTime",value:function(){return console.log("get base time "+this.worldTime),this.worldTime}},{key:"setTime",value:function(e){return Number(e)&&(console.log("set base time "+Number(e)),this.worldTime=Number(e)),this.worldTime}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}(),c=0,u=function(){function e(t,n){a(this,e),this.id=++c,this.name=t||"",this.salary=n||0}return r(e,[{key:"startWork",value:function(){console.log(this.name+"start work.")}},{key:"finishWork",value:function(){console.log(this.name+"work over.")}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}(),l=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.customer={},r}return i(t,u),r(t,[{key:"changeStatus",value:function(e,t){var n=document.querySelector("#waiter-wrapper"),r=n.querySelector("#waiter-status");switch(e){case"order":r.innerText="order",this.moveToWhere("Customer",n);break;case"place an order":r.innerText="place an order",this.moveToWhere("Cook",n),setTimeout(function(e){e.innerText="free"},500,r);break;case"serving":r.innerText="serving",this.moveToWhere("Customer",n),setTimeout(this.moveToWhere,500,"Cook",n),setTimeout(function(e){e.innerText="free"},1e3,r),this.customer.eat(t)}}},{key:"moveToWhere",value:function(e,t){switch(e){case"Customer":t.style.top="225px",t.style.left="550px";break;case"Cook":t.style.top="10px",t.style.left="320px"}}}]),t}(),d=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preList=[],r}return i(t,u),r(t,[{key:"startWork",value:function(){console.log(this.name+"cook dish.")}},{key:"finishWork",value:function(){console.log(this.name+"cook over.")}},{key:"changeStatus",value:function(e){var t=document.querySelector("#cook-status");switch(e){case"start":for(var n=0;this.preList.length>0;){for(var r=this.preList[0],o=[],i=1;i<this.preList.length;i++)o.push(this.preList[i]);this.preList=o;for(var a=function(e){setTimeout(function(n){t.innerText="cook "+n.name+" need "+(n.time-e)+" seconds"},1e3*n+1e3*e,r)},s=0;s<r.time;s++)a(s);n+=r.time;var c=this.preList;setTimeout(function(e,t,n){l.getInstance().changeStatus("serving",n),t.updateCookList(e)},1e3*n,c,this,r)}setTimeout(function(){t.innerText="free"},1e3*n)}}},{key:"updateCookList",value:function(e){e=e||this.preList;for(var t=document.querySelector("#app #cook-list"),n="",r=0;r<e.length;r++)n+="<li>"+e[r].name+"</li>";t.innerHTML=n}}]),t}(),f=function(){function e(){a(this,e),this.eatList=[]}return r(e,[{key:"order",value:function(){return p.getInstance().getRandom()}},{key:"changeStatus",value:function(e,t){var n=document.querySelector("#customer-status");switch(e){case"have a seat":n.innerText="have a seat";break;case"order":console.log(t);for(var r=function(e){setTimeout(function(){n.innerText="order need "+(t-e)/1e3+" seconds"},e)},o=0;o<t;o+=1e3)r(o);break;case"order over":n.innerText="order over"}}},{key:"eat",value:function(e){for(var t=document.querySelector("#customer-status"),n=document.querySelectorAll("#customer-dish-list li"),r={},o=0;o<n.length;o++)if(n[o].innerText===e.name){r=n[o];break}r.innerText=e.name+" ready",t.innerText="start eat",setTimeout(function(){r.innerText=e.name+" eat up"},3e3)}}]),e}(),p=function(){function e(t){if(a(this,e),this.list=[],null!=t)for(var n in t)this.add(t[n].name,t[n].cost,t[n].price,t[n].time)}return r(e,[{key:"add",value:function(e,t,n,r){this.list.push(new h(e,t,n,r))}},{key:"getRandom",value:function(){for(var e=Math.ceil(Math.random()*this.list.length),t=[],n=0;n<e;n++){var r=Math.floor(Math.random()*this.list.length);-1===t.indexOf(this.list[r])&&t.push(this.list[r])}return t}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new this(e)),this.instance}}]),e}(),h=function e(t,n,r,o){a(this,e),this.name=t,this.cost=n,this.price=r,this.time=o};t.Restaurant=s,t.Staff=u,t.Waiter=l,t.Cook=d,t.Customer=f,t.Dish=h,t.Menu=p},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;var r=n(0),o=function(){};o.create=function(e){var t={};switch(e){case"Customer":t=new r.Customer;break;case"Menu":t=r.Menu.getInstance()}return t},t.Factory=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restaurantStart=void 0;var r=n(0),o=n(3);t.restaurantStart=function(){var e=r.Restaurant.getInstance({cash:1e6,seats:1,staffList:[]});document.querySelector("#app #cash").innerText=e.cash;var t=r.Cook.getInstance("Cook_Wang",1e4),n=r.Waiter.getInstance("Waiter_Xu",5e3);e.hire(t),e.hire(n);var i=o.Factory.create("Menu");i.add("Pasta",130,390,2),i.add("Cabbage mustard",120,360,3),i.add("Bean sprouts",30,120,2),i.add("Cocoa powder",180,440,4),e.setTime(1e3);var a=e.getTime();document.querySelector("#app #add-customer").onclick=function(){u.length<18?u.push(o.Factory.create("Customer")):alert("The queue is too long, you can't wait in here."),l()};var s=setInterval(c,1e3);function c(){if("None"===document.querySelector("#customer-status").innerText&&0!==u.length){var r=u.shift();l(),new Promise(function(e,t){r.changeStatus("have a seat"),console.log("The customer has sat down"),e()}).then(function(){n.changeStatus("order")}).then(function(){r.changeStatus("order",3e3)}).then(function(){setTimeout(function(){r.eatList=r.order(),function(e){for(var t=document.querySelector("#app #customer-dish-list"),n="",r=0;r<e.length;r++)n+="<li>"+e[r].name+"</li>";t.innerHTML=n}(r.eatList),r.changeStatus("order over"),t.preList=r.eatList,n.changeStatus("place an order"),n.customer=r},3*a)}).then(function(){setTimeout(function(){t.updateCookList(),t.changeStatus("start")},3.5*a)}),setInterval(function(t){!function(t){var n=document.querySelectorAll("#app #customer-dish-list li"),r=document.querySelector("#app #cash"),o=document.querySelector("#customer-status");if("After dinner"!==o.innerText&&0!==n.length){for(var i=0;i<n.length;i++)if(-1===n[i].innerText.indexOf("eat up"))return;for(var a=Number(r.innerText),s=0;s<t.eatList.length;s++)a+=Number(t.eatList[s].price-t.eatList[s].cost);r.innerText=a,e.cash=a,o.innerText="After dinner",setTimeout(function(){o.innerText="None",n[0].parentNode.innerHTML=""},1e3)}}(t)},100,r)}}document.getElementById("pause").onclick=function(){"PAUSE"===this.value?(console.log(this.value),this.value="CONTINUE",clearInterval(s)):(console.log(this.value),this.value="PAUSE",setInterval(c,1e3))};var u=[];function l(){for(var e=document.querySelector("#app #customer-list"),t="",n=0;n<u.length;n++)t+='<div class = "customer"></div>';e.innerHTML=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLoadEvent=function(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}},function(e,t,n){"use strict";var r=n(5),o=n(4);n(2),(0,r.addLoadEvent)(o.restaurantStart)}]);